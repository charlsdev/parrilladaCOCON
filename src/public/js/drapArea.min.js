let wrapper,
   fileName,
   image,
   defaultBtn,
   customBtn,
   cancelBtn;
   
wrapper = document.querySelector('.wrapperImg');
fileName = document.querySelector('.file-name');
image = document.querySelector('.image');
defaultBtn = document.querySelector('#default-btn');
customBtn = document.querySelector('#custom-btn');
cancelBtn = document.querySelector('#cancel-btn i');
// const img = document.querySelector('img');

// eslint-disable-next-line no-useless-escape
let regExp = /[0-9a-zA-Z\^\&\'\@\{\}\[\]\,\$\=\!\-\#\(\)\.\%\+\~\_ ]+$/;

image.onclick = () => {
   customBtn.click();
};

function defaultBtnActive() {
   if (!document.querySelector('.imgTrans')) {
      image.insertAdjacentHTML('afterbegin', 
         '<img class="imgTrans" />');
   }
   defaultBtn.click();
}

defaultBtn.addEventListener('change', function () {
   let file = this.files[0];
   let fileType = file.type;
   let validExtensions = ['image/jpeg', 'image/jpg', 'image/png'];

   if(validExtensions.includes(fileType)){
      // if (file) {
      const reader = new FileReader();
      reader.onload = function () {
         const result = reader.result;
         // img.src = result;
         $('img').remove('.imgTrans');
         image.innerHTML = `<img class="imgTrans" src="${result}" alt="image" />`;
         wrapper.classList.add('active');
      };
      cancelBtn.addEventListener('click', function () {
         // img.src = '';
         $('img').remove('.imgTrans');
         image.insertAdjacentHTML('afterbegin', 
            '<img class="imgTrans" />');
         wrapper.classList.remove('active');
      });
      reader.readAsDataURL(file);
   }else{
      Swal.fire({
         position: 'top-end',
         icon: 'info',
         title: 'Fomato no válido',
         text: '¡Esto no es un archivo de imagen!',
         showConfirmButton: false,
         timer: 2500
      });
   }

   if (this.value) {
      let valueStore = this.value.match(regExp);
      fileName.textContent = valueStore;
   }
});
